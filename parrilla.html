<!DOCTYPE html>
<html lang="es-MX">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lilly — Optimizador de parrilla</title>
  <meta name="description" content="Calendario y recomendaciones de publicación." />
  <meta name="color-scheme" content="light" />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    :root{
      --lilly-red:#DF3024; --lilly-red-dark:#C1281E;
      --bg-soft:#ffffff; --text:#2a2a2a; --white:#fff; --muted:rgba(33, 33, 33, 0.65);
      --shadow:0 8px 24px rgba(0,0,0,.08); --radius:18px; --container:1120px;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0;
      font-family:ui-sans-serif,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      background:var(--bg-soft);
      color:var(--text);
      min-height:100vh;
      display:flex;
      flex-direction:column;
      background-image: radial-gradient(rgba(0,0,0,.12) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    .wrap{max-width:var(--container);margin:0 auto;padding:28px 20px 64px;flex:1;display:flex;flex-direction:column;gap:24px}
    .topbar{
      display:flex;align-items:center;justify-content:space-between;gap:16px;
      margin-bottom:32px;padding-top:12px;width:100vw;padding:0 20px;
    }
    .topbar-inner{ width:100%; display:flex; align-items:center; justify-content:space-between; padding:12px 0; }
    .brand{display:inline-flex;align-items:center;gap:12px;min-height:60px}
    .brand img{display:block;height:44px}
    .brand-fallback{font-family:"Georgia","Times New Roman",serif;font-size:35px;font-style:italic;color:var(--lilly-red)}
    .title{ font-family:'Bebas Neue',sans-serif; font-weight:bold; letter-spacing:.5px; font-size:clamp(16px,2.2vw,24px); color:#111; text-transform:uppercase; }
    .actions{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between}
    .back{display:inline-flex;align-items:center;gap:8px;background:#111;color:#fff;border:0;border-radius:999px;padding:10px 16px;font-weight:800;cursor:pointer;box-shadow:var(--shadow);text-decoration:none}
    .back:hover{ filter: brightness(1.1); }
    .input{background:var(--white);border:1.5px solid rgba(0,0,0,.08);border-radius:12px;padding:10px 12px;min-height:40px;box-shadow:var(--shadow);color:var(--text)}
    .run{background:#111;color:#fff;border:0;border-radius:14px;padding:12px 18px;font-weight:800;box-shadow:var(--shadow);cursor:pointer}
    .run:hover{ filter: brightness(1.1); }
    .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}
    .day{background:var(--white);border-radius:12px;box-shadow:var(--shadow);padding:10px;min-height:120px;display:flex;flex-direction:column}
    .day h3{margin:0 0 6px;font-size:14px;color:var(--lilly-red)}
    .posts{flex:1;display:flex;flex-direction:column;gap:4px;font-size:13px}
    .post{background:var(--bg-soft);border-radius:8px;padding:4px 6px}
    .card{background:var(--white);border-radius:12px;box-shadow:0 12px 24px rgba(0,0,0,.15);padding:18px}
    .card h2{margin:0 0 10px;font-size:22px;color:#111;font-family:'Bebas Neue',sans-serif;letter-spacing:.3px;text-transform:uppercase}
    .muted{color:var(--muted);font-size:13px}
    .uploader{display:flex;gap:12px;flex-wrap:wrap;align-items:flex-start}
    .drop{border:2px dashed rgba(0,0,0,.15);border-radius:16px;padding:16px;text-align:center;background:rgba(255,255,255,.9)}
    .preview{display:flex;align-items:center;justify-content:center;width:240px;aspect-ratio:9/16;background:#fff;border-radius:12px;overflow:hidden;box-shadow:var(--shadow)}
    .preview img,.preview video{max-width:100%;max-height:100%;display:block;object-fit:cover}
    .textarea{background:#fff;border:1.5px solid rgba(0,0,0,.08);border-radius:12px;box-shadow:var(--shadow);color:var(--text);width:320px;min-height:120px;padding:12px}
    .queue{display:flex;flex-direction:column;gap:6px;max-width:100%}
    .queue-item{background:var(--bg-soft);border-radius:8px;padding:8px 10px;box-shadow:var(--shadow);display:flex;justify-content:space-between;gap:10px}
    .queue-item small{color:var(--muted)}
    .calendar .post{display:flex;gap:6px;align-items:center}
    .time-badge{font-size:11px;background:#111;color:#fff;border-radius:6px;padding:2px 6px}
    footer{position:fixed;bottom:0;left:0;width:100%;background:var(--bg-soft);text-align:center;padding:10px 0;font-size:12px;color:rgba(122,20,15,.7);user-select:none;box-shadow:0 -2px 6px rgba(0,0,0,.06)}
    footer p{font-family:'Helvetica Neue',Arial,sans-serif;font-weight:700;letter-spacing:.5px;text-transform:uppercase;font-size:12px;color:#111;opacity:.7;text-align:center}
    @media(max-width:900px){.calendar{grid-template-columns:1fr 1fr}}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <img src="assets/lilly-logo.svg" alt="Lilly"
             onerror="this.style.display='none';this.nextElementSibling.style.display='inline-block';" />
        <span class="brand-fallback" style="display:none">Lilly</span>
      </div>
      <h1 class="title">SOCIAL MEDIA TOOLS BY HOOD.</h1>
    </div>
  </header>
  <main class="wrap">

    <div class="actions">
      <a class="back" href="intex.html">⟵ Volver</a>
      <div class="uploader">
        <div class="drop" style="flex:0 0 auto">
          <input id="file" type="file" accept="image/*,video/*" style="display:none" multiple />
          <div id="dropzone" class="preview" role="img" aria-label="Vista previa">
            <span class="muted">Arrastra tus posts (imagen/video) aquí o <button id="browse" class="run" type="button">Buscar…</button></span>
          </div>
        </div>
        <div style="display:flex;flex-direction:column;gap:8px">
          <textarea id="copy" class="textarea" placeholder="Pega aquí el copy del post seleccionado…"></textarea>
          <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
            <button id="addPost" class="run" type="button">Agregar a lista</button>
            <button id="optimize" class="run" type="button">Optimizar parrilla</button>
            <span class="muted" id="queueCount">0 posts en lista</span>
          </div>
        </div>
        <div class="queue" style="min-width:280px" id="queue"></div>
      </div>
    </div>

    <!-- Calendario semanal -->
    <section class="calendar" id="calendar">
      <div class="day"><h3>Lunes</h3><div class="posts"></div></div>
      <div class="day"><h3>Martes</h3><div class="posts"></div></div>
      <div class="day"><h3>Miércoles</h3><div class="posts"></div></div>
      <div class="day"><h3>Jueves</h3><div class="posts"></div></div>
      <div class="day"><h3>Viernes</h3><div class="posts"></div></div>
      <div class="day"><h3>Sábado</h3><div class="posts"></div></div>
      <div class="day"><h3>Domingo</h3><div class="posts"></div></div>
    </section>

    <!-- Recomendaciones -->
    <article class="card">
      <h2>Recomendaciones de publicación</h2>
      <ul id="advices">
        <li>—</li><li>—</li><li>—</li>
      </ul>
    </article>

  </main>

  <footer><p>© 2025 Social Media Tools by Hood. All Rights Reserved.</p></footer>

  <script>
    // ---- State ----
    const $file = document.getElementById('file');
    const $drop = document.getElementById('dropzone');
    const $browse = document.getElementById('browse');
    const $copy = document.getElementById('copy');
    const $addPost = document.getElementById('addPost');
    const $optimize = document.getElementById('optimize');
    const $queue = document.getElementById('queue');
    const $queueCount = document.getElementById('queueCount');
    const $calendar = document.getElementById('calendar');
    const $advices = document.getElementById('advices');

    let currentFile = null; // último archivo seleccionado para el textarea
    let posts = []; // { id, type: 'image'|'video', name, copy }

    // ---- Uploader & Preview ----
    $browse.addEventListener('click', ()=> $file.click());
    $file.addEventListener('change', (e)=>{
      const files = Array.from(e.target.files||[]);
      if (files.length === 0) return;
      // Usa el primero para la vista previa inmediata; el resto se pueden ir agregando con "Agregar a lista"
      setPreview(files[0]);
      currentFile = files[0];
    });
    $drop.addEventListener('dragover', e => { e.preventDefault(); $drop.style.opacity = .9; });
    $drop.addEventListener('dragleave', ()=> { $drop.style.opacity = 1; });
    $drop.addEventListener('drop', e => {
      e.preventDefault(); $drop.style.opacity = 1;
      const f = e.dataTransfer.files?.[0];
      if (f) { setPreview(f); currentFile = f; }
    });

    function setPreview(file){
      const isImage = file.type.startsWith('image/');
      const isVideo = file.type.startsWith('video/');
      if(!isImage && !isVideo) return alert('Sube imagen o video.');
      $drop.innerHTML = '';
      if(isImage){
        const img = document.createElement('img');
        img.src = URL.createObjectURL(file);
        $drop.appendChild(img);
      } else {
        const vid = document.createElement('video');
        vid.src = URL.createObjectURL(file); vid.controls = true; vid.muted = true; vid.playsInline = true;
        $drop.appendChild(vid);
      }
    }

    // ---- Queue handling ----
    $addPost.addEventListener('click', ()=>{
      if (!currentFile) return alert('Primero selecciona/arrastra un archivo.');
      const isImage = currentFile.type.startsWith('image/');
      const item = {
        id: Date.now()+Math.random(),
        type: isImage ? 'image' : 'video',
        name: currentFile.name || (isImage?'imagen':'video'),
        copy: ($copy.value||'').trim()
      };
      posts.push(item);
      renderQueue();
      // limpia selección de copy pero deja la previsualización por si agregan el mismo archivo con otro copy
      $copy.value='';
    });

    function renderQueue(){
      $queue.innerHTML = '';
      posts.forEach((p, idx)=>{
        const row = document.createElement('div');
        row.className = 'queue-item';
        row.innerHTML = `<div><strong>${p.name}</strong><br><small>${p.type.toUpperCase()} • ${p.copy? (p.copy.slice(0,60)+(p.copy.length>60?'…':'')) : 'Sin copy'}</small></div>`;
        const del = document.createElement('button');
        del.textContent = 'Quitar';
        del.className = 'run';
        del.style.padding = '6px 10px';
        del.addEventListener('click', ()=>{ posts.splice(idx,1); renderQueue(); });
        row.appendChild(del);
        $queue.appendChild(row);
      });
      $queueCount.textContent = `${posts.length} post${posts.length!==1?'s':''} en lista`;
    }

    // ---- Optimize (simulate AI placement) ----
    $optimize.addEventListener('click', ()=>{
      if (posts.length === 0) return alert('Agrega al menos un post.');
      autoPlacePosts(posts);
      renderAdvices();
    });

    function autoPlacePosts(items){
      // Limpia calendario
      Array.from($calendar.children).forEach(day=> day.querySelector('.posts').innerHTML='');
      // Heurística simple: asigna días y horas recomendadas
      const preferred = [
        { day: 1, hour: '19:00' }, // Martes
        { day: 3, hour: '19:30' }, // Jueves
        { day: 5, hour: '11:00' }, // Sábado
        { day: 2, hour: '19:00' }, // Miércoles (si hay más)
        { day: 4, hour: '18:30' }, // Viernes
        { day: 0, hour: '19:00' }, // Lunes
        { day: 6, hour: '11:30' }  // Domingo
      ];
      items.forEach((p, i)=>{
        const slot = preferred[i % preferred.length];
        const postsContainer = $calendar.children[slot.day].querySelector('.posts');
        const div = document.createElement('div');
        div.className = 'post';
        const label = document.createElement('span'); label.className = 'time-badge'; label.textContent = slot.hour;
        const text = document.createElement('span'); text.textContent = `${p.name} — ${p.copy? p.copy.slice(0,40)+(p.copy.length>40?'…':'') : 'Sin copy'}`;
        div.appendChild(label); div.appendChild(text);
        postsContainer.appendChild(div);
      });
    }

    function renderAdvices(){
      const tips = [
        'Distribuye 3–4 publicaciones por semana (evita días consecutivos).',
        'Usa horarios cercanos a 19:00 entre semana y 11:00 en fin de semana.',
        'Mezcla formatos (video + carrusel + estático) para maximizar alcance.',
        'Incluye subtítulos en video y texto alternativo en imágenes.'
      ];
      const shuffled = [...tips].sort(()=>Math.random()-0.5);
      $advices.innerHTML='';
      shuffled.slice(0,3).forEach(t=>{ const li=document.createElement('li'); li.textContent=t; $advices.appendChild(li); });
    }
  </script>
</body>
</html>